@page "/"
@inherits ProductsBase
@using System.Globalization;

@{
	Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US");
}

<h3>Products</h3>

@if(ProductDTOs == null)
{
	<h3>Loading products....</h3>
}
else
{
	<h3 class="mb-5">Products</h3>

	var productCount = ProductDTOs.Count();

	if (productCount>0)
	{

		@*var groupedProductsByCategory = ProductDTOs.GroupBy(product => product.CategoryId)
							.OrderBy(group => group.Key)
							.Select(g => g);*@
			
		@foreach(var prodGroup in GetGroupProductsByCategory())
		{
			<h4>@GetCategoryName(prodGroup)</h4>
			<div class="row mt-3">
				<DisplayProducts ProductDTOs="@prodGroup"></DisplayProducts>
			</div>
			<hr class="mb-3"/>
		}
		
	}
}